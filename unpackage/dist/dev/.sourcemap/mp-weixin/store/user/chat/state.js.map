{"version":3,"file":"state.js","sources":["store/user/chat/state.js"],"sourcesContent":["/**\n * chat模块的状态\n * @module store/user/chat/state\n */\n\nexport default {\n      // 当前会话状态\n  currentSession: {\n    sessionId: null,       // 当前会话ID\n    sessionType: null,     // 会话类型 (单聊/群聊/客服等)\n    targetId: null,        // 对方ID(用户ID或群ID)\n    unreadCount: 0,        // 未读消息数\n    lastMessage: null,     // 最后一条消息\n    isActive: false,       // 是否处于活跃状态(前端是否打开)\n    draftMessage: ''       // 草稿消息\n  },\n  \n  // 会话列表\n  sessions: {\n    // 按sessionId存储的会话对象\n    byId: {\n      'session1': {\n        sessionId: 'session1',\n        sessionType: 'private',\n        targetId: 'user123',\n        title: '王老师',       // 会话标题(可能是备注/群名称)\n        avatar: '/static/image/defaultAvatar/teacher-man.png',       // 头像\n        lastMessage: {},     // 最后一条消息\n        unreadCount: 3,      // 未读数量\n        lastMessageTime: 1620000000, // 最后消息时间戳\n        isMuted: false,      // 是否静音\n        isTop: false,        // 是否置顶\n        draft: ''            // 草稿\n      }\n    },\n    // 按时间排序的sessionId数组\n    allIds: []\n  },\n  \n  // 消息存储\n  messages: {\n    // 按sessionId分组存储的消息\n    bySessionId: {\n      \n      'session1': {\n        hasMore: true,       // 是否还有更多历史消息\n        isLoading: false,     // 是否正在加载\n        list: [              // 消息数组(按时间排序)\n          {\n            id: 'msg1',       // 消息ID\n            type: 'text',    // 消息类型(text/image/file等)\n            content: '你好，我是王老师，很高兴认识你',   // 消息内容\n            senderId: 'user123', // 发送者ID\n            senderInfo: {}, // 发送者信息(可选)\n            time: 1620000000, // 时间戳\n            status: 'sent',   // 状态(sent/delivered/read/failed)\n            isSelf: false     // 是否是自己发送的\n          }\n        ]\n      }\n    }\n  },\n  \n  // 用户信息缓存(减少重复请求)\n  userInfos: {\n    \n    'user123':  {\n      userId: 'user123',\n      nickname: '王老师',\n      avatar: '/static/image/defaultAvatar/teacher-man.png',\n      remark: '王老师'       // 备注名\n    }\n    \n  },\n  \n  // IM 连接状态\n  connection: {\n    isConnected: false,    // 是否已连接\n    isConnecting: false,   // 是否正在连接中\n    lastError: null,       // 最后错误信息\n    reconnectCount: 0      // 重连次数\n  },\n  \n  // 其他状态\n  uiState: {\n    inputFocus: false,     // 输入框是否聚焦\n    showEmojiPicker: false, // 是否显示表情选择器\n    showMorePanel: false   // 是否显示更多功能面板\n  }\n}; "],"names":[],"mappings":";AAKA,MAAe,QAAA;AAAA;AAAA,EAEb,gBAAgB;AAAA,IACd,WAAW;AAAA;AAAA,IACX,aAAa;AAAA;AAAA,IACb,UAAU;AAAA;AAAA,IACV,aAAa;AAAA;AAAA,IACb,aAAa;AAAA;AAAA,IACb,UAAU;AAAA;AAAA,IACV,cAAc;AAAA;AAAA,EACf;AAAA;AAAA,EAGD,UAAU;AAAA;AAAA,IAER,MAAM;AAAA,MACJ,YAAY;AAAA,QACV,WAAW;AAAA,QACX,aAAa;AAAA,QACb,UAAU;AAAA,QACV,OAAO;AAAA;AAAA,QACP,QAAQ;AAAA;AAAA,QACR,aAAa,CAAE;AAAA;AAAA,QACf,aAAa;AAAA;AAAA,QACb,iBAAiB;AAAA;AAAA,QACjB,SAAS;AAAA;AAAA,QACT,OAAO;AAAA;AAAA,QACP,OAAO;AAAA;AAAA,MACR;AAAA,IACF;AAAA;AAAA,IAED,QAAQ,CAAE;AAAA,EACX;AAAA;AAAA,EAGD,UAAU;AAAA;AAAA,IAER,aAAa;AAAA,MAEX,YAAY;AAAA,QACV,SAAS;AAAA;AAAA,QACT,WAAW;AAAA;AAAA,QACX,MAAM;AAAA;AAAA,UACJ;AAAA,YACE,IAAI;AAAA;AAAA,YACJ,MAAM;AAAA;AAAA,YACN,SAAS;AAAA;AAAA,YACT,UAAU;AAAA;AAAA,YACV,YAAY,CAAE;AAAA;AAAA,YACd,MAAM;AAAA;AAAA,YACN,QAAQ;AAAA;AAAA,YACR,QAAQ;AAAA;AAAA,UACT;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGD,WAAW;AAAA,IAET,WAAY;AAAA,MACV,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ;AAAA;AAAA,IACT;AAAA,EAEF;AAAA;AAAA,EAGD,YAAY;AAAA,IACV,aAAa;AAAA;AAAA,IACb,cAAc;AAAA;AAAA,IACd,WAAW;AAAA;AAAA,IACX,gBAAgB;AAAA;AAAA,EACjB;AAAA;AAAA,EAGD,SAAS;AAAA,IACP,YAAY;AAAA;AAAA,IACZ,iBAAiB;AAAA;AAAA,IACjB,eAAe;AAAA;AAAA,EAChB;AACH;;"}