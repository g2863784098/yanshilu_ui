{"version":3,"file":"bill.js","sources":["pagesMine/bill/bill.vue","pagesMine/bill/bill.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"bill-container\">\t\t<!-- 交易记录标题 -->\t\t<view class=\"transaction-title\">\t\t\t<text>交易记录</text>\t\t</view>\t\t\n\t\t<!-- 交易记录列表 -->\n\t\t<scroll-view \n\t\t\tclass=\"transaction-list\" \n\t\t\tscroll-y \n\t\t\t@scrolltolower=\"loadMore\"\n\t\t\trefresher-enabled\n\t\t\t:refresher-triggered=\"refreshing\"\n\t\t\t@refresherrefresh=\"refresh\"\n\t\t>\n\t\t\t<template v-if=\"transactionList.length > 0\">\n\t\t\t\t<!-- 按日期分组 -->\n\t\t\t\t<view v-for=\"(group, date) in groupedTransactions\" :key=\"date\" class=\"date-group\">\n\t\t\t\t\t<view class=\"date-title\">{{formatGroupDate(date)}}</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 交易项目 -->\n\t\t\t\t\t<view \n\t\t\t\t\t\tv-for=\"(item, index) in group\" \n\t\t\t\t\t\t:key=\"item.id\" \n\t\t\t\t\t\tclass=\"transaction-item\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<view class=\"transaction-icon\" :class=\"item.amount > 0 ? 'income' : 'expense'\">\n\t\t\t\t\t\t\t<text class=\"icon-text\">{{item.amount > 0 ? '入' : '出'}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"transaction-info\">\n\t\t\t\t\t\t\t<view class=\"transaction-title\">{{item.name}}</view>\n\t\t\t\t\t\t\t<view class=\"transaction-time\">{{formatTime(item.date)}}</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"transaction-amount\" :class=\"item.amount > 0 ? 'income' : 'expense'\">\n\t\t\t\t\t\t\t<text>{{item.amount > 0 ? '+' : ''}}{{item.amount.toFixed(2)}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 加载状态 -->\n\t\t\t\t<view class=\"loading-state\">\n\t\t\t\t\t<text v-if=\"isLoading\">加载中...</text>\n\t\t\t\t\t<text v-else-if=\"!hasMore\">—— 没有更多了 ——</text>\n\t\t\t\t</view>\n\t\t\t</template>\n\t\t\t\n\t\t\t<!-- 空状态 -->\n\t\t\t<view v-else-if=\"!isLoading\" class=\"empty-state\">\n\t\t\t\t<view class=\"empty-icon\">\n\t\t\t\t\t<image src=\"/static/image/empty-bill.png\" mode=\"aspectFit\"></image>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"empty-text\">暂无交易记录</text>\n\t\t\t</view>\n\t\t</scroll-view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\n// 导入模拟数据\nimport moneyState from '@/store/user/money/state.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\trefreshing: false,\n\t\t\t// 直接使用模拟数据\n\t\t\tlocalTransactionList: moneyState.transactionList,\n\t\t\tisLoading: false,\n\t\t\thasMore: false\n\t\t}\n\t},\n\tcomputed: {\n\t\t// 使用本地数据\n\t\ttransactionList() {\n\t\t\treturn this.localTransactionList;\n\t\t},\n\t\t\n\t\t// 按日期分组的交易记录 - 显示所有记录，不再按月筛选\n\t\tgroupedTransactions() {\n\t\t\tconst grouped = {};\n\t\t\t\n\t\t\t// 直接使用所有交易记录，不再按月筛选\n\t\t\tif (this.transactionList && this.transactionList.length > 0) {\n\t\t\t\tthis.transactionList.forEach(item => {\n\t\t\t\t\tconst date = this.formatDate(item.date);\n\t\t\t\t\tif (!grouped[date]) {\n\t\t\t\t\t\tgrouped[date] = [];\n\t\t\t\t\t}\n\t\t\t\t\tgrouped[date].push(item);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\treturn grouped;\n\t\t}\n\t},\n\tonLoad() {\n\t\t// 初始化加载交易记录\n\t\tuni.__f__('log','at pagesMine/bill/bill.vue:94','加载交易记录:', this.transactionList);\n\t\tthis.fetchData();\n\t},\n\t// 下拉触底加载更多\n\tonReachBottom() {\n\t\tthis.loadMore();\n\t},\n\tmethods: {\n\t\t// 初始化加载交易数据 - 使用模拟数据，无需实际请求\n\t\tfetchData() {\n\t\t\t// 模拟加载中状态\n\t\t\tthis.isLoading = true;\n\t\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\t// 确保交易记录数据已正确加载\n\t\t\t\tif (!this.localTransactionList || this.localTransactionList.length === 0) {\n\t\t\t\t\tthis.localTransactionList = moneyState.transactionList || [];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 重置加载状态\n\t\t\t\tthis.isLoading = false;\n\t\t\t\t// 设置是否有更多数据\n\t\t\t\tthis.hasMore = moneyState.hasMore;\n\t\t\t}, 500);\n\t\t},\n\t\t\n\t\t// 加载更多交易数据\n\t\tloadMore() {\n\t\t\t// 如果没有更多数据或正在加载中，则不执行\n\t\t\tif (!this.hasMore || this.isLoading) return;\n\t\t\t\n\t\t\t// 模拟加载更多 - 实际应用中应该调用API\n\t\t\tthis.isLoading = true;\n\t\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t\t// 模拟没有更多数据\n\t\t\t\tthis.hasMore = false;\n\t\t\t}, 500);\n\t\t},\n\t\t\n\t\t// 下拉刷新\n\t\trefresh() {\n\t\t\tthis.refreshing = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\t// 重新获取数据\n\t\t\t\tthis.fetchData();\n\t\t\t\t// 模拟刷新完成\n\t\t\t\tthis.refreshing = false;\n\t\t\t}, 1000);\n\t\t},\n\t\t\n\t\t// 格式化日期分组标题\n\t\tformatGroupDate(dateStr) {\n\t\t\tconst date = new Date(dateStr);\n\t\t\treturn `${date.getMonth() + 1}月${date.getDate()}日`;\n\t\t},\n\t\t\n\t\t// 格式化日期为YYYY-MM-DD\n\t\tformatDate(timestamp) {\n\t\t\tconst date = new Date(timestamp);\n\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n\t\t},\n\t\t\n\t\t// 格式化时间为HH:mm\n\t\tformatTime(timestamp) {\n\t\t\tconst date = new Date(timestamp);\n\t\t\treturn `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n.bill-container {\n\tmin-height: 100vh;\n\tbackground-color: #F5F7FA;\n\tpadding: 30rpx;\n\tbox-sizing: border-box;\n\tfont-family: \"PingFang SC\", -apple-system, BlinkMacSystemFont, Roboto, \"Helvetica Neue\", sans-serif;\n}\n\n/* 交易记录标题 */\n.transaction-title {\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #333333;\n\tmargin-bottom: 20rpx;\n\tpadding: 0 10rpx;\n}\n\n/* 交易记录列表 */\n.transaction-list {\n\theight: calc(100vh - 100rpx); /* 调整高度 */\n\tbackground-color: #FFFFFF;\n\tborder-radius: 20rpx;\n\toverflow: hidden;\n\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n}\n\n.date-group {\n\tmargin-bottom: 30rpx;\n}\n\n.date-title {\n\tpadding: 20rpx 30rpx;\n\tfont-size: 26rpx;\n\tcolor: #999999;\n\tbackground-color: #F9FAFC;\n}\n\n.transaction-item {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 30rpx;\n\tborder-bottom: 1rpx solid #F0F0F0;\n}\n\n.transaction-icon {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 20rpx;\n\t\n\t&.income {\n\t\tbackground-color: rgba(52, 211, 153, 0.1);\n\t}\n\t\n\t&.expense {\n\t\tbackground-color: rgba(239, 68, 68, 0.1);\n\t}\n}\n\n.icon-text {\n\tfont-size: 26rpx;\n\tfont-weight: 500;\n\t\n\t.income & {\n\t\tcolor: #34D399;\n\t}\n\t\n\t.expense & {\n\t\tcolor: #EF4444;\n\t}\n}\n\n.transaction-info {\n\tflex: 1;\n\tmargin-right: 20rpx;\n}\n\n.transaction-info .transaction-title {\n\tfont-size: 30rpx;\n\tcolor: #333333;\n\tmargin-bottom: 8rpx;\n\tfont-weight: normal;\n}\n\n.transaction-time {\n\tfont-size: 24rpx;\n\tcolor: #999999;\n}\n\n.transaction-amount {\n\tfont-size: 32rpx;\n\tfont-weight: 500;\n\t\n\t&.income {\n\t\tcolor: #34D399;\n\t}\n\t\n\t&.expense {\n\t\tcolor: #EF4444;\n\t}\n}\n\n.loading-state {\n\ttext-align: center;\n\tpadding: 30rpx 0;\n\tfont-size: 24rpx;\n\tcolor: #999999;\n}\n\n/* 空状态 */\n.empty-state {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding-top: 200rpx;\n}\n\n.empty-icon {\n\tmargin-bottom: 30rpx;\n\t\n\timage {\n\t\twidth: 200rpx;\n\t\theight: 200rpx;\n\t}\n}\n\n.empty-text {\n\tfont-size: 28rpx;\n\tcolor: #999999;\n}\n</style>","import MiniProgramPage from '/Users/ghw/Documents/waibao/yanshilu_ui/pagesMine/bill/bill.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","moneyState","uni"],"mappings":";;;;AAyDA,MAAA,YAAeA,8BAAA;AAAA,EACd,OAAI;AACH,WAAO;AAAA,MACN,YAAY;AAAA;AAAA,MAEZ,sBAAsBC,uBAAU,WAAC;AAAA,MACjC,WAAW;AAAA,MACX,SAAS;AAAA;EAEV;AAAA,EACD,UAAU;AAAA;AAAA,IAET,kBAAe;AACd,aAAO,KAAK;AAAA,IACZ;AAAA;AAAA,IAGD,sBAAmB;AAClB,YAAM,UAAQ,IAAA,cAAE,CAAA,CAAE;AAGlB,UAAI,KAAK,mBAAmB,KAAK,gBAAgB,SAAS,GAAG;AAC5D,aAAK,gBAAgB,QAAQ,CAAA,OAAG,SAAA;AAC/B,gBAAM,OAAO,KAAK,WAAW,KAAK,IAAI;AACtC,cAAI,CAAC,QAAQ,IAAI,GAAG;AACnB,oBAAQ,IAAI,IAAI;UACjB;AACA,kBAAQ,IAAI,EAAE,KAAK,IAAI;AAAA,QACxB,CAAC;AAAA,MACF;AAEA,aAAO;AAAA,IACR;AAAA,EACA;AAAA,EACD,SAAM;AAELC,kBAAG,MAAC,MAAM,OAAM,iCAAgC,WAAW,KAAK,eAAe;AAC/E,SAAK,UAAS;AAAA,EACd;AAAA;AAAA,EAED,gBAAa;AACZ,SAAK,SAAQ;AAAA,EACb;AAAA,EACD,SAAS;AAAA;AAAA,IAER,YAAS;AAER,WAAK,YAAY;AAEjB,iBAAW,MAAA;AAEV,YAAI,CAAC,KAAK,wBAAwB,KAAK,qBAAqB,WAAW,GAAG;AACzE,eAAK,uBAAuBD,kCAAW,mBAAmB,CAAA;AAAA,QAC3D;AAGA,aAAK,YAAY;AAEjB,aAAK,UAAUA,uBAAU,WAAC;AAAA,MAC1B,GAAE,GAAG;AAAA,IACN;AAAA;AAAA,IAGD,WAAQ;AAEP,UAAI,CAAC,KAAK,WAAW,KAAK;AAAW,eAAM;AAG3C,WAAK,YAAY;AAEjB,iBAAW,MAAA;AACV,aAAK,YAAY;AAEjB,aAAK,UAAU;AAAA,MACf,GAAE,GAAG;AAAA,IACN;AAAA;AAAA,IAGD,UAAO;AACN,WAAK,aAAa;AAClB,iBAAW,MAAA;AAEV,aAAK,UAAS;AAEd,aAAK,aAAa;AAAA,MAClB,GAAE,GAAI;AAAA,IACP;AAAA;AAAA,IAGD,gBAAgB,UAAO,MAAA;AACtB,YAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,aAAO,GAAG,KAAK,aAAa,CAAC,IAAI,KAAK,SAAS;AAAA,IAC/C;AAAA;AAAA,IAGD,WAAW,YAAS,MAAA;AACnB,YAAM,OAAO,IAAI,KAAK,SAAS;AAC/B,aAAO,GAAG,KAAK,YAAW,CAAE,IAAI,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAO,KAAK,SAAS,EAAE,SAAS,GAAG,GAAG,CAAC;AAAA,IACvH;AAAA;AAAA,IAGD,WAAW,YAAS,MAAA;AACnB,YAAM,OAAO,IAAI,KAAK,SAAS;AAC/B,aAAO,GAAG,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAO,KAAK,YAAY,EAAE,SAAS,GAAG,GAAG,CAAC;AAAA,IACjG;AAAA,EACD;CACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClKD,GAAG,WAAW,eAAe;"}