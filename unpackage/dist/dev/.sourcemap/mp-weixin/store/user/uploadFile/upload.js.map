{"version":3,"file":"upload.js","sources":["store/user/uploadFile/upload.js"],"sourcesContent":["// /store/user/unloadFile/unload.js\nimport { uploadFile } from '@/utils/http';\n\nconst state = {\n    fileLink: '' // 后端返回的文件下载链接\n};\n\nconst mutations = {\n    SET_FILE_LINK(state, link) {\n        state.fileLink = link;\n    }\n};\n\nconst actions = {\n    async uploadUserFile({ commit }, { userId, filePath }) {\n        try {\n            const res = await uploadFile(filePath, userId);\n            commit('SET_FILE_LINK', res.data.url); // 后端返回的是 { code: 200, data: { url: 'https://...' } }\n            return res;\n        } catch (err) {\n            console.error('上传失败', err);\n            throw err;\n        }\n    }\n};\n\nexport default {\n    namespaced: true,\n    state,\n    mutations,\n    actions\n};\n"],"names":["state","uploadFile","uni"],"mappings":";;;AAGA,MAAM,QAAQ;AAAA,EACV,UAAU;AAAA;AACd;AAEA,MAAM,YAAY;AAAA,EACd,cAAcA,QAAO,MAAM;AACvB,IAAAA,OAAM,WAAW;AAAA,EACpB;AACL;AAEA,MAAM,UAAU;AAAA,EACZ,MAAM,eAAe,EAAE,OAAM,GAAI,EAAE,QAAQ,SAAQ,GAAI;AACnD,QAAI;AACA,YAAM,MAAM,MAAMC,WAAAA,WAAW,UAAU,MAAM;AAC7C,aAAO,iBAAiB,IAAI,KAAK,GAAG;AACpC,aAAO;AAAA,IACV,SAAQ,KAAK;AACVC,oBAAA,MAAA,MAAA,SAAA,yCAAc,QAAQ,GAAG;AACzB,YAAM;AAAA,IACT;AAAA,EACJ;AACL;AAEA,MAAe,aAAA;AAAA,EACX,YAAY;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AACJ;;"}