{"version":3,"file":"actions.js","sources":["store/user/match/actions.js"],"sourcesContent":["/**\n * match模块的actions\n * @module store/user/match/actions\n */\n\nimport { getMatchTeacherList, getTeacherDetail } from '../APIroute/match_api/match_api.js';\n\n/**\n * 获取匹配的老师列表\n * @param {Object} context - Vuex上下文对象\n * @param {Object} payload - 请求参数\n * @param {boolean} [payload.loadMore=false] - 是否加载更多数据\n * @returns {Promise} 返回匹配的老师列表结果\n */\nexport const fetchMatchTeacherList = ({ commit, rootState, state }, payload = {}) => {\n  // 从根state获取用户ID\n  const userId = rootState.user.baseInfo.id;\n  \n  // 判断是加载更多还是重新加载第一页\n  const isLoadMore = payload.loadMore === true;\n  \n  // 如果是加载更多，则页码加1，否则重置为第1页\n  const currentPage = isLoadMore ? state.currentPage + 1 : 1;\n  \n  // 构建请求参数\n  const params = {\n    userId: userId,\n    schoolList: payload.schoolList || state.schoolList,\n    professionalList: payload.professionalList || state.professionalList,\n    nonProfessionalList: payload.nonProfessionalList || state.nonProfessionalList,\n    sortMode: payload.sortMode || state.sortMode,\n    currentPage: currentPage,\n    pageSize: payload.pageSize || state.pageSize\n  };\n  \n  return new Promise((resolve, reject) => {\n    getMatchTeacherList(params)\n      .then(response => {\n        // 更新matchList\n        if (response && response.data) {\n          if (isLoadMore) {\n            // 加载更多时，追加到现有列表\n            commit('APPEND_MATCH_LIST', response.data);\n          } else {\n            // 重新加载时，替换列表\n            commit('SET_MATCH_LIST', response.data);\n          }\n          \n          // 更新分页信息\n          commit('SET_PAGINATION', {\n            currentPage: currentPage,\n            hasMore: response.hasMore || false\n          });\n        }\n        resolve(response);\n      })\n      .catch(error => {\n        reject(error);\n      });\n  });\n};\n\n/**\n * 获取老师详细信息\n * @param {Object} context - Vuex上下文对象\n * @param {Object} payload - 请求参数\n * @param {string} payload.teacherId - 老师ID\n * @returns {Promise} 返回老师详细信息\n */\nexport const fetchTeacherDetail = ({ commit, rootState }, { teacherId }) => {\n  // 从根state获取用户ID\n  const userId = rootState.user.baseInfo.id;\n  \n  if (!teacherId) {\n    return Promise.reject(new Error('老师ID不能为空'));\n  }\n  \n  // 构建请求参数\n  const params = {\n    userId: userId,\n    teacherId: teacherId\n  };\n  \n  return new Promise((resolve, reject) => {\n    getTeacherDetail(params)\n      .then(response => {\n        // 更新老师详情\n        if (response && response.data) {\n          commit('SET_TEACHER_DETAIL', {\n            teacherId: teacherId,\n            detail: response.data\n          });\n        }\n        resolve(response);\n      })\n      .catch(error => {\n        reject(error);\n      });\n  });\n};\n\nexport default {\n  fetchMatchTeacherList,\n  fetchTeacherDetail\n};\n"],"names":["getMatchTeacherList","getTeacherDetail"],"mappings":";;AAcO,MAAM,wBAAwB,CAAC,EAAE,QAAQ,WAAW,MAAO,GAAE,UAAU,OAAO;AAEnF,QAAM,SAAS,UAAU,KAAK,SAAS;AAGvC,QAAM,aAAa,QAAQ,aAAa;AAGxC,QAAM,cAAc,aAAa,MAAM,cAAc,IAAI;AAGzD,QAAM,SAAS;AAAA,IACb;AAAA,IACA,YAAY,QAAQ,cAAc,MAAM;AAAA,IACxC,kBAAkB,QAAQ,oBAAoB,MAAM;AAAA,IACpD,qBAAqB,QAAQ,uBAAuB,MAAM;AAAA,IAC1D,UAAU,QAAQ,YAAY,MAAM;AAAA,IACpC;AAAA,IACA,UAAU,QAAQ,YAAY,MAAM;AAAA,EACxC;AAEE,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCA,4CAAAA,oBAAoB,MAAM,EACvB,KAAK,cAAY;AAEhB,UAAI,YAAY,SAAS,MAAM;AAC7B,YAAI,YAAY;AAEd,iBAAO,qBAAqB,SAAS,IAAI;AAAA,QACrD,OAAiB;AAEL,iBAAO,kBAAkB,SAAS,IAAI;AAAA,QACvC;AAGD,eAAO,kBAAkB;AAAA,UACvB;AAAA,UACA,SAAS,SAAS,WAAW;AAAA,QACzC,CAAW;AAAA,MACF;AACD,cAAQ,QAAQ;AAAA,IACxB,CAAO,EACA,MAAM,WAAS;AACd,aAAO,KAAK;AAAA,IACpB,CAAO;AAAA,EACP,CAAG;AACH;AASO,MAAM,qBAAqB,CAAC,EAAE,QAAQ,UAAS,GAAI,EAAE,UAAS,MAAO;AAE1E,QAAM,SAAS,UAAU,KAAK,SAAS;AAEvC,MAAI,CAAC,WAAW;AACd,WAAO,QAAQ,OAAO,IAAI,MAAM,UAAU,CAAC;AAAA,EAC5C;AAGD,QAAM,SAAS;AAAA,IACb;AAAA,IACA;AAAA,EACJ;AAEE,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCC,4CAAAA,iBAAiB,MAAM,EACpB,KAAK,cAAY;AAEhB,UAAI,YAAY,SAAS,MAAM;AAC7B,eAAO,sBAAsB;AAAA,UAC3B;AAAA,UACA,QAAQ,SAAS;AAAA,QAC7B,CAAW;AAAA,MACF;AACD,cAAQ,QAAQ;AAAA,IACxB,CAAO,EACA,MAAM,WAAS;AACd,aAAO,KAAK;AAAA,IACpB,CAAO;AAAA,EACP,CAAG;AACH;AAEA,MAAe,UAAA;AAAA,EACb;AAAA,EACA;AACF;;"}