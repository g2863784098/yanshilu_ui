{"version":3,"file":"actions.js","sources":["store/user/money/actions.js"],"sourcesContent":["import { getTransactionAPI } from '@/store/user/APIroute/money_api/money_api';\n\nexport default {\n    /**\n     * 初始化加载交易数据（刷新）\n     * @param {*} param0 \n     * @param {string} userId \n     */\n    async fetchTransactionList({ commit, state }, userId) {\n        commit('resetTransactionState');\n        commit('setLoading', true);\n        try {\n            const list = await getTransactionAPI(userId, 1, state.pageSize);\n            commit('setTransactionList', list);\n            commit('setCurrentPage', 1);\n            commit('setHasMore', list.length === state.pageSize);\n        } catch (err) {\n            console.error('获取交易列表失败', err);\n            commit('setHasMore', false);\n        } finally {\n            commit('setLoading', false);\n        }\n    },\n\n    /**\n     * 加载更多交易数据（下拉触发）\n     * @param {*} param0 \n     * @param {string} userId \n     */\n    async loadMoreTransactions({ commit, state }, userId) {\n        if (state.isLoading || !state.hasMore) return;\n\n        commit('setLoading', true);\n        try {\n            const nextPage = state.currentPage + 1;\n            const list = await getTransactionAPI(userId, nextPage, state.pageSize);\n            commit('appendTransactionList', list);\n            commit('setCurrentPage', nextPage);\n            if (list.length < state.pageSize) {\n                commit('setHasMore', false);\n            }\n        } catch (err) {\n            console.error('加载更多交易记录失败', err);\n            commit('setHasMore', false);\n        } \n    }\n};\n\n"],"names":["getTransactionAPI","uni"],"mappings":";;;AAEA,MAAe,UAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMX,MAAM,qBAAqB,EAAE,QAAQ,MAAK,GAAI,QAAQ;AAClD,WAAO,uBAAuB;AAC9B,WAAO,cAAc,IAAI;AACzB,QAAI;AACA,YAAM,OAAO,MAAMA,0DAAkB,QAAQ,GAAG,MAAM,QAAQ;AAC9D,aAAO,sBAAsB,IAAI;AACjC,aAAO,kBAAkB,CAAC;AAC1B,aAAO,cAAc,KAAK,WAAW,MAAM,QAAQ;AAAA,IACtD,SAAQ,KAAK;AACVC,oBAAA,MAAA,MAAA,SAAA,qCAAc,YAAY,GAAG;AAC7B,aAAO,cAAc,KAAK;AAAA,IACtC,UAAkB;AACN,aAAO,cAAc,KAAK;AAAA,IAC7B;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,MAAM,qBAAqB,EAAE,QAAQ,MAAK,GAAI,QAAQ;AAClD,QAAI,MAAM,aAAa,CAAC,MAAM;AAAS;AAEvC,WAAO,cAAc,IAAI;AACzB,QAAI;AACA,YAAM,WAAW,MAAM,cAAc;AACrC,YAAM,OAAO,MAAMD,0DAAkB,QAAQ,UAAU,MAAM,QAAQ;AACrE,aAAO,yBAAyB,IAAI;AACpC,aAAO,kBAAkB,QAAQ;AACjC,UAAI,KAAK,SAAS,MAAM,UAAU;AAC9B,eAAO,cAAc,KAAK;AAAA,MAC7B;AAAA,IACJ,SAAQ,KAAK;AACVC,oBAAA,MAAA,MAAA,SAAA,qCAAc,cAAc,GAAG;AAC/B,aAAO,cAAc,KAAK;AAAA,IAC7B;AAAA,EACJ;AACL;;"}